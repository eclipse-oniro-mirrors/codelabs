"use strict";
/*
 * Copyright (c) Huawei Technologies Co., Ltd. 2022-2022. All rights reserved.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.OhosProjectModelBean = void 0;
const map_util_js_1 = require("../../../utils/map-util.js");
/**
 * OhosProject中的Project模块的toolModel数据模型
 *
 * @since 2022/2/19
 */
class OhosProjectModelBean {
    constructor(project) {
        this.modelId = "ohos-project";
        this._project = project;
        const plugin = project.getPlugin();
        this._projectTaskService = plugin.getTaskService();
    }
    computeCommonInfo(info) {
        const targetProduct = this._projectTaskService.getTargetProduct();
        const pathInfo = this._projectTaskService.getPathInfo();
        info.set("SELECT_PRODUCT_NAME", targetProduct.name);
        info.set("MODULE_BUILD_DIR", pathInfo.getProjectBuildPath());
        let bundleName = targetProduct.bundleName;
        if (bundleName === undefined) {
            bundleName = this._projectTaskService.getProjectModel().getDefaultBundleName();
        }
        info.set("BUNDLE_NAME", bundleName);
    }
    computePathInfo(info) {
        const pathInfo = this._projectTaskService.getPathInfo();
        const buildPath = {
            "OUTPUT_PATH": pathInfo.getProjectOutputPath()
        };
        info.set("BUILD_PATH", buildPath);
    }
    buildModel() {
        const info = new Map();
        this.computeCommonInfo(info);
        this.computePathInfo(info);
        return (0, map_util_js_1.strMapToObj)(info);
    }
}
exports.OhosProjectModelBean = OhosProjectModelBean;
//# sourceMappingURL=ohos-project-model-bean.js.map