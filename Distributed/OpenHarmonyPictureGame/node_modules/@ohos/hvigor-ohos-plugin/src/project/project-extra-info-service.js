"use strict";
/*
 * Copyright (c) Huawei Technologies Co., Ltd. 2022-2022. All rights reserved.
 *
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.ProjectExtraInfoService = void 0;
const app_extra_info_js_1 = require("./data/app-extra-info.js");
const hap_extra_info_js_1 = require("./data/hap-extra-info.js");
const project_model_impl_js_1 = require("../model/project/project-model-impl.js");
const legacy_project_model_impl_js_1 = require("../model/project/legacy-project-model-impl.js");
/**
 * 提供一个单例对象，来初始化工程的所有模块的额外的状态信息，并在执行任务时获取
 *
 * @since 2022/1/18
 */
class ProjectExtraInfoService {
    static getProjectExtraInfoByPath(vigorProject) {
        const modulePath = vigorProject.getProjectDir();
        if (this.projectExtraInfoMap.has(modulePath)) {
            return this.projectExtraInfoMap.get(modulePath);
        }
        let projectExtraInfo;
        if (vigorProject instanceof project_model_impl_js_1.ProjectModelImpl || vigorProject instanceof legacy_project_model_impl_js_1.LegacyProjectModelImpl) {
            projectExtraInfo = new app_extra_info_js_1.AppExtraInfo(vigorProject);
        }
        else {
            projectExtraInfo = new hap_extra_info_js_1.HapExtraInfo(vigorProject);
        }
        this.projectExtraInfoMap.set(vigorProject.getProjectDir(), projectExtraInfo);
        return projectExtraInfo;
    }
}
exports.ProjectExtraInfoService = ProjectExtraInfoService;
ProjectExtraInfoService.projectExtraInfoMap = new Map();
//# sourceMappingURL=project-extra-info-service.js.map