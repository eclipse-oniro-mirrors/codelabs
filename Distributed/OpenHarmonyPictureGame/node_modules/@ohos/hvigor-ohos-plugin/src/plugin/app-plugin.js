"use strict";
/*
 * Copyright (c) Huawei Technologies Co., Ltd. 2021-2022. All rights reserved.
 *
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.AppPlugin = void 0;
const project_task_service_js_1 = require("../tasks/service/project-task-service.js");
const assemble_app_js_1 = require("../tasks/assemble/assemble-app.js");
const project_model_impl_js_1 = require("../model/project/project-model-impl.js");
const clean_js_1 = require("../tasks/common/clean.js");
const sync_project_js_1 = require("../tasks/sync/sync-project.js");
const legacy_project_model_impl_js_1 = require("../model/project/legacy-project-model-impl.js");
/**
 * 对外暴露app级别的接口和任务的plugin
 *
 * @since 2021/12/16
 */
class AppPlugin {
    constructor(project, isFaMode) {
        this._module = project;
        this._moduleName = project.getName();
        this._projectModel = isFaMode ?
            legacy_project_model_impl_js_1.LegacyProjectModelImpl.getInstance(project.getModuleDir(), project.getName()) :
            project_model_impl_js_1.ProjectModelImpl.getInstance(project.getModuleDir(), project.getName());
        this._taskService = new project_task_service_js_1.ProjectTaskService(project, this._projectModel);
        this.assembleApp = new assemble_app_js_1.AssembleApp(this._taskService, isFaMode);
        this.clean = new clean_js_1.Clean(this._taskService);
        this.sync = new sync_project_js_1.SyncProject(project);
    }
    getTaskService() {
        return this._taskService;
    }
}
exports.AppPlugin = AppPlugin;
//# sourceMappingURL=app-plugin.js.map