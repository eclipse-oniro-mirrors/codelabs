"use strict";
/*
 * Copyright (c) Huawei Technologies Co., Ltd. 2021-2022. All rights reserved.
 *
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.AssembleSubHar = void 0;
const hvigor_base_1 = require("@ohos/hvigor-base");
const pre_build_js_1 = require("../pre-build.js");
const collect_har_dependency_js_1 = require("../collect-har-dependency.js");
const merge_profile_js_1 = require("../merge-profile.js");
const process_profile_js_1 = require("../process-profile.js");
const merge_resource_js_1 = require("../merge-resource.js");
const compile_resource_js_1 = require("../compile-resource.js");
const legacy_merge_profile_js_1 = require("../legacy-tasks/legacy-merge-profile.js");
const legacy_process_profile_js_1 = require("../legacy-tasks/legacy-process-profile.js");
const legacy_compile_resource_js_1 = require("../legacy-tasks/legacy-compile-resource.js");
const compile_native_js_1 = require("../compile-native.js");
const process_libs_js_1 = require("../process-libs.js");
const build_native_js_1 = require("../build-native.js");
/**
 * 组装Hap打包的任务流
 *
 * @since 2022/1/20
 */
class AssembleSubHar extends hvigor_base_1.Task {
    constructor(taskService, isFaMode) {
        super();
        this.registry = () => {
            const hvigor = new hvigor_base_1.Hvigor();
            // 新老模型的任务流不一致
            if (this._isFaMode) {
                return hvigor.series(new pre_build_js_1.PreBuild(this._taskService).registry(), new collect_har_dependency_js_1.CollectHarDependency(this._taskService).registry(), new legacy_merge_profile_js_1.LegacyMergeProfile(this._taskService).registry(), new legacy_process_profile_js_1.LegacyProcessProfile(this._taskService).registry(), new legacy_compile_resource_js_1.LegacyCompileResource(this._taskService).registry(), new compile_native_js_1.CompileNative(this._taskService).registry(), new build_native_js_1.BuildNative(this._taskService).registry(), new process_libs_js_1.ProcessLibs(this._taskService).registry());
            }
            return hvigor.series(new pre_build_js_1.PreBuild(this._taskService).registry(), new collect_har_dependency_js_1.CollectHarDependency(this._taskService).registry(), new merge_profile_js_1.MergeProfile(this._taskService).registry(), new process_profile_js_1.ProcessProfile(this._taskService).registry(), new merge_resource_js_1.MergeResource(this._taskService).registry(), new compile_resource_js_1.CompileResource(this._taskService).registry(), new compile_native_js_1.CompileNative(this._taskService).registry(), new build_native_js_1.BuildNative(this._taskService).registry(), new process_libs_js_1.ProcessLibs(this._taskService).registry());
        };
        this._taskService = taskService;
        this._isFaMode = isFaMode;
    }
}
exports.AssembleSubHar = AssembleSubHar;
//# sourceMappingURL=assemble-sub-har.js.map