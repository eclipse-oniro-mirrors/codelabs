"use strict";
/*
 * Copyright (c) Huawei Technologies Co., Ltd. 2021-2021. All rights reserved.
 *
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.BuildHarPreviewerRes = void 0;
const hvigor_base_1 = require("@ohos/hvigor-base");
const pre_build_js_1 = require("../pre-build.js");
const merge_profile_js_1 = require("../merge-profile.js");
const process_profile_js_1 = require("../process-profile.js");
const merge_resource_js_1 = require("../merge-resource.js");
const compile_resource_js_1 = require("../compile-resource.js");
const legacy_merge_profile_1 = require("../legacy-tasks/legacy-merge-profile");
const legacy_process_profile_1 = require("../legacy-tasks/legacy-process-profile");
const legacy_compile_resource_1 = require("../legacy-tasks/legacy-compile-resource");
const collect_har_dependency_js_1 = require("../collect-har-dependency.js");
const legacy_generate_har_js_manifest_js_1 = require("../legacy-tasks/legacy-generate-har-js-manifest.js");
/**
 * for preview hook only
 */
class BuildHarPreviewerRes extends hvigor_base_1.Task {
    constructor(taskService, isFaMode) {
        super();
        this.registry = () => {
            const hvigor = new hvigor_base_1.Hvigor();
            if (this._isFaMode) {
                return hvigor.series(new collect_har_dependency_js_1.CollectHarDependency(this._taskService).registry(), new pre_build_js_1.PreBuild(this._taskService).registry(), new legacy_merge_profile_1.LegacyMergeProfile(this._taskService).registry(), new legacy_process_profile_1.LegacyProcessProfile(this._taskService).registry(), new legacy_compile_resource_1.LegacyCompileResource(this._taskService).registry(), new legacy_generate_har_js_manifest_js_1.LegacyGenerateHarJsManifest(this._taskService).registry());
            }
            return hvigor.series(new collect_har_dependency_js_1.CollectHarDependency(this._taskService).registry(), new pre_build_js_1.PreBuild(this._taskService).registry(), new merge_profile_js_1.MergeProfile(this._taskService).registry(), new process_profile_js_1.ProcessProfile(this._taskService).registry(), new merge_resource_js_1.MergeResource(this._taskService).registry(), new compile_resource_js_1.CompileResource(this._taskService).registry());
        };
        this._taskService = taskService;
        this._isFaMode = isFaMode;
    }
}
exports.BuildHarPreviewerRes = BuildHarPreviewerRes;
//# sourceMappingURL=build-har-previewer-res.js.map