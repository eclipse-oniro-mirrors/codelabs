"use strict";
/*
 * Copyright (c) Huawei Technologies Co., Ltd. 2021-2021. All rights reserved.
 *
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.BuildPreviewerRes = void 0;
const hvigor_base_1 = require("@ohos/hvigor-base");
const pre_build_js_1 = require("../pre-build.js");
const merge_profile_js_1 = require("../merge-profile.js");
const process_profile_js_1 = require("../process-profile.js");
const merge_resource_js_1 = require("../merge-resource.js");
const compile_resource_js_1 = require("../compile-resource.js");
const replace_previewer_page_1 = require("./replace-previewer-page");
const legacy_merge_profile_1 = require("../legacy-tasks/legacy-merge-profile");
const legacy_process_profile_1 = require("../legacy-tasks/legacy-process-profile");
const legacy_compile_resource_1 = require("../legacy-tasks/legacy-compile-resource");
const legacy_generate_js_manifest_1 = require("../legacy-tasks/legacy-generate-js-manifest");
const collect_har_dependency_js_1 = require("../collect-har-dependency.js");
const generate_loader_json_js_1 = require("../generate-loader-json.js");
const syscap_transform_1 = require("../syscap-transform");
/**
 * for preview hook only
 */
class BuildPreviewerRes extends hvigor_base_1.Task {
    constructor(taskService, isFaMode) {
        super();
        this.registry = () => {
            return this._isFaMode ?
                new hvigor_base_1.Hvigor().series(new collect_har_dependency_js_1.CollectHarDependency(this._taskService).registry(), new pre_build_js_1.PreBuild(this._taskService).registry(), new legacy_merge_profile_1.LegacyMergeProfile(this._taskService).registry(), new legacy_process_profile_1.LegacyProcessProfile(this._taskService).registry(), new legacy_compile_resource_1.LegacyCompileResource(this._taskService).registry(), new syscap_transform_1.SyscapTransform(this._taskService).registry(), new legacy_generate_js_manifest_1.LegacyGenerateJsManifest(this._taskService).registry(), new generate_loader_json_js_1.GenerateLoaderJson(this._taskService).registry()) :
                new hvigor_base_1.Hvigor().series(new collect_har_dependency_js_1.CollectHarDependency(this._taskService).registry(), new pre_build_js_1.PreBuild(this._taskService).registry(), new merge_profile_js_1.MergeProfile(this._taskService).registry(), new process_profile_js_1.ProcessProfile(this._taskService).registry(), new merge_resource_js_1.MergeResource(this._taskService).registry(), new compile_resource_js_1.CompileResource(this._taskService).registry(), new syscap_transform_1.SyscapTransform(this._taskService).registry(), new generate_loader_json_js_1.GenerateLoaderJson(this._taskService).registry(), new replace_previewer_page_1.ReplacePreviewerPage(this._taskService).registry());
        };
        this._taskService = taskService;
        this._isFaMode = isFaMode;
    }
}
exports.BuildPreviewerRes = BuildPreviewerRes;
//# sourceMappingURL=build-previewer-res.js.map