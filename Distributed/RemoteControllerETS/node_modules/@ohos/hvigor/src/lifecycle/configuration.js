"use strict";
/*
 * Copyright (c) Huawei Technologies Co., Ltd. 2021-2021. All rights reserved.
 *
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.configuration = void 0;
const path_1 = __importDefault(require("path"));
const hvigor_base_1 = require("@ohos/hvigor-base");
/**
 * Config整个hvigor的项目，进行数据绑定
 *
 * @param env
 */
function configuration(env) {
    const vigorConfigInst = require(env.modulePath).vigorConfigInst;
    const project = vigorConfigInst.getProject();
    for (const subModule of project.getAllSubProjects()) {
        const subModuleVigorFileJs = subModule.getBuildFilePath();
        configModule(subModule, subModuleVigorFileJs);
    }
    const projectVigorFileJs = path_1.default.resolve(env.cwd, hvigor_base_1.HvigorCommonConst.BUILD_FILE_NAME);
    configModule(project, projectVigorFileJs);
    return project;
}
exports.configuration = configuration;
function configModule(module, hvigorFilePath) {
    const moduleExported = require(hvigorFilePath);
    const pluginNTasks = moduleExported(module);
    module.exported = pluginNTasks;
    // 绑定创建的plugin对象到project上
    module.bindPlugin(pluginNTasks.plugin);
}
//# sourceMappingURL=configuration.js.map